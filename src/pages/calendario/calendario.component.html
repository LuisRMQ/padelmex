<div class="board">

  <!-- Columna de horas -->
  <div class="time-gutter">
    <div class="gutter-header" style="height: var(--header-height);"></div>
    <div class="time-label" *ngFor="let t of times" [style.top.px]="minutesToPx(t.min - dayStartMin)">
      {{ t.label }}
    </div>
  </div>

  <div class="board-scroll" #boardScrollRef>
    <div class="columns">

      <div class="court-col" *ngFor="let court of courts; let i = index" #courtColRef
        (click)="onCourtClick($event, court, courtColRef)">

        <div class="court-header">
          {{ court.name }}
        </div>

        <div class="time-grid">
          <div class="time-slot" *ngFor="let t of times; let ti = index"
            [style.top.px]="minutesToPx(t.min - dayStartMin)"></div>
        </div>

        <div class="reservations-layer">
          <div class="reservation" *ngFor="let res of reservations | slice:0" [class.hidden]="res.courtId !== court.id"
            [ngStyle]="getReservationStyle(res)" cdkDrag
            (cdkDragStarted)="onDragStarted($event, res, $event.source.element.nativeElement)"
            (cdkDragEnded)="onDragEnded($event, res, $event.source.element.nativeElement)">
            <div class="res-title">
              {{ res.user }} • {{ formatTime(res.startMin) }}–{{ formatTime(res.endMin) }}
            </div>
            <div class="res-actions">
              <button type="button" (click)="$event.stopPropagation(); subtractMinutes(res, 15)">–15m</button>
              <button type="button" (click)="$event.stopPropagation(); addMinutes(res, 15)">+15m</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>