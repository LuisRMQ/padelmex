<div class="modal-container">
  <h2>Registrar Torneo</h2>

  <form [formGroup]="form" (ngSubmit)="guardar()" class="torneo-form">

    <!-- Nombre -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nombre del torneo</mat-label>
      <input matInput formControlName="nombre" />
    </mat-form-field>

    <!-- Descripción -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Descripción</mat-label>
      <textarea matInput formControlName="descripcion"></textarea>
    </mat-form-field>

    <!-- Fecha -->
    <mat-form-field appearance="outline" class="half-width">
      <mat-label>Fecha</mat-label>
      <input matInput type="date" formControlName="fecha" />
    </mat-form-field>

    <!-- Categoría -->
    <mat-form-field appearance="outline" class="half-width">
      <mat-label>Categoría</mat-label>
      <mat-select formControlName="categoria">
        <mat-option value="1">Primera Juvenil</mat-option>
        <mat-option value="2">Segunda Juvenil</mat-option>
        <mat-option value="3">Tercera Juvenil</mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Cantidad de jugadores -->
    <mat-form-field appearance="outline" class="half-width">
      <mat-label>Cantidad de jugadores</mat-label>
      <input matInput type="number" min="2" formControlName="cantidad_jugadores" />
    </mat-form-field>

    <!-- Premio -->
    <mat-form-field appearance="outline" class="half-width">
      <mat-label>Premio</mat-label>
      <input matInput type="number" min="0" formControlName="precio" />
    </mat-form-field>

    <!-- Logo -->
    <div class="logo-upload">
      <img [src]="logoPreview || 'assets/default-torneo.jpg'" alt="Logo preview" />
      <input type="file" (change)="onFileSelected($event)" hidden #fileInput>
      <button mat-stroked-button type="button" (click)="fileInput.click()">
        <mat-icon>upload</mat-icon> Subir Logo
      </button>
    </div>

   <div class="participantes-section">
  <h3>Participantes</h3>

  <div cdkDropListGroup class="drag-drop-container">

    <!-- Lista de disponibles -->
    <div class="list-box">
      <h4>Disponibles</h4>
      <div
        cdkDropList
        #availableList="cdkDropList"
        [cdkDropListData]="usuariosDisponibles"
        [cdkDropListConnectedTo]="[selectedList]"
        class="list"
        (cdkDropListDropped)="drop($event)"
      >
        <div class="list-item" *ngFor="let user of usuariosDisponibles" cdkDrag>
          <img [src]="user.profile_photo || 'assets/default-user.png'" class="user-photo" />
          <span>{{ user.name }} {{ user.lastname }}</span>
        </div>
      </div>
    </div>

    <!-- Lista de seleccionados -->
    <div class="list-box">
      <h4>Seleccionados</h4>
      <div
        cdkDropList
        #selectedList="cdkDropList"
        [cdkDropListData]="participantesSeleccionados"
        [cdkDropListConnectedTo]="[availableList]"
        class="list"
        (cdkDropListDropped)="drop($event)"
      >
        <div class="list-item" *ngFor="let user of participantesSeleccionados" cdkDrag>
          <img [src]="user.profile_photo || 'assets/default-user.png'" class="user-photo" />
          <span>{{ user.name }} {{ user.lastname }}</span>
        </div>
      </div>
    </div>

  </div>
</div>

    <!-- Botones -->
    <div class="actions">
      <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
        Guardar
      </button>
      <button mat-button type="button" (click)="onCancel()">Cancelar</button>
    </div>
  </form>
</div>
