<div class="modern-card">
  <div class="card-header">
    <h2 class="modern-title">Registrar Ganador</h2>
    <div class="tournament-badge">Partido</div>
  </div>

  <mat-dialog-content class="modern-content">
    <!-- Cuadrícula de equipos -->
    <div class="teams-grid">
      <!-- Equipo 1 -->
      <div class="team-column">
        <div class="team-header">
          <h3 class="team-title">Equipo 1</h3>
        </div>

        <div class="players-list">
          <div *ngFor="let j of data.partido.jugador1" class="player-card">
            <img
              *ngIf="j.photo"
              [src]="j.photo"
              (error)="onImgError($event)"
              alt="{{ j.name }}"
              class="player-photo"
            />
            <div *ngIf="!j.photo" class="avatar-placeholder">
              {{ j.name.charAt(0) }}
            </div>
            <span class="player-name">{{ j.name }}</span>
          </div>
        </div>
      </div>

      <!-- Equipo 2 -->
      <div class="team-column">
        <div class="team-header">
          <h3 class="team-title">Equipo 2</h3>
        </div>

        <div class="players-list">
          <div *ngFor="let j of data.partido.jugador2" class="player-card">
            <img
              *ngIf="j.photo"
              [src]="j.photo"
              (error)="onImgError($event)"
              alt="{{ j.name }}"
              class="player-photo"
            />
            <div *ngIf="!j.photo" class="avatar-placeholder">
              {{ j.name.charAt(0) }}
            </div>
            <span class="player-name">{{ j.name }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Cuadrícula de sets (1 marcador por equipo) -->
    <div class="sets-grid">
      <div class="sets-header">
        <div class="header-cell">Equipo</div>
        <div class="header-cell">Set 1</div>
        <div class="header-cell">Set 2</div>
        <div class="header-cell">Set 3</div>
      </div>

      <!-- Fila Equipo 1 -->
      <div class="sets-row">
        <div class="team-name-cell">
          <span>Equipo 1</span>
        </div>
        <div class="set-input-cell">
          <input type="number" min="0" max="50" [(ngModel)]="score1_set1" />
        </div>
        <div class="set-input-cell">
          <input type="number" min="0" max="50" [(ngModel)]="score1_set2" />
        </div>
        <div class="set-input-cell">
          <input type="number" min="0" max="50" [(ngModel)]="score1_set3" />
        </div>
      </div>

      <!-- Fila Equipo 2 -->
      <div class="sets-row">
        <div class="team-name-cell">
          <span>Equipo 2</span>
        </div>
        <div class="set-input-cell">
          <input type="number" min="0" max="50" [(ngModel)]="score2_set1" />
        </div>
        <div class="set-input-cell">
          <input type="number" min="0" max="50" [(ngModel)]="score2_set2" />
        </div>
        <div class="set-input-cell">
          <input type="number" min="0" max="50" [(ngModel)]="score2_set3" />
        </div>
      </div>
    </div>

    <!-- Botones -->
    <div class="set-buttons">
      <button
        mat-raised-button
        class="set-save-btn"
        (click)="guardarSet(1)"
        [disabled]="!score1_set1 || !score2_set1"
      >
        Guardar Set 1
      </button>
      <button
        mat-raised-button
        class="set-save-btn"
        (click)="guardarSet(2)"
        [disabled]="!score1_set2 || !score2_set2"
      >
        Guardar Set 2
      </button>
      <button
        mat-raised-button
        class="set-save-btn"
        (click)="guardarSet(3)"
        [disabled]="!score1_set3 || !score2_set3"
      >
        Guardar Set 3
      </button>
    </div>

    <!-- Progreso -->
    <div class="progress-section" *ngIf="completedSets > 0">
      <div class="progress-info">
        <span class="progress-text"
          >{{ completedSets }}/3 sets completados</span
        >
        <div class="progress-bar">
          <div
            class="progress-fill"
            [style.width.%]="(completedSets / 3) * 100"
          ></div>
        </div>
      </div>
    </div>
  </mat-dialog-content>

  <mat-dialog-actions class="modern-actions">
    <button mat-button class="cancel-btn" (click)="cancelar()">
      <mat-icon>close</mat-icon> Cancelar
    </button>
    <button
      mat-raised-button
      class="save-btn"
      color="primary"
      (click)="confirmar()"
      [disabled]="completedSets < 3"
    >
      <mat-icon>sports_score</mat-icon> Confirmar Resultado Final
    </button>
  </mat-dialog-actions>
</div>
