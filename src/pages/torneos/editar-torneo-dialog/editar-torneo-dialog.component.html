<div class="modal-container" style="max-height:80vh; overflow-y:auto; padding:1rem;">
  <h2>Editar Torneo</h2>

  <form [formGroup]="form" (ngSubmit)="guardar()" class="torneo-form">

    <!-- Nombre -->
    <mat-form-field appearance="outline" class="full-width" floatLabel="always">
      <mat-label>Nombre del torneo</mat-label>
      <input matInput formControlName="name" />
    </mat-form-field>

    <!-- Descripción -->
    <mat-form-field appearance="outline" class="full-width" floatLabel="always">
      <mat-label>Descripción</mat-label>
      <textarea matInput formControlName="description" cdkTextareaAutosize></textarea>
    </mat-form-field>

    <!-- Fecha inicio -->
    <mat-form-field appearance="outline" class="half-width" floatLabel="always">
      <mat-label>Fecha inicio</mat-label>
      <input matInput type="date" formControlName="start_date" />
    </mat-form-field>

    <!-- Fecha fin -->
    <mat-form-field appearance="outline" class="half-width" floatLabel="always">
      <mat-label>Fecha fin</mat-label>
      <input matInput type="date" formControlName="end_date" />
    </mat-form-field>

    <!-- Fecha límite de inscripción -->
    <mat-form-field appearance="outline" class="half-width" floatLabel="always">
      <mat-label>Fecha límite de inscripción</mat-label>
      <input matInput type="date" formControlName="registration_deadline" />
    </mat-form-field>

    <!-- Costo de inscripción -->
    <mat-form-field appearance="outline" class="half-width" floatLabel="always">
      <mat-label>Costo de inscripción</mat-label>
      <input matInput type="number" min="0" formControlName="registration_fee" />
    </mat-form-field>

    <!-- Categoría -->
    <mat-form-field appearance="outline" class="half-width" floatLabel="always">
      <mat-label>Categorías</mat-label>
      <mat-select formControlName="categories" multiple>
        <mat-option *ngFor="let cat of categoriasDisponibles" [value]="cat">
          {{ cat.category }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Máx. participantes -->
    <mat-form-field appearance="outline" class="half-width" floatLabel="always">
      <mat-label>Máx. participantes</mat-label>
      <input matInput type="number" min="2" formControlName="max_participants" />
    </mat-form-field>

    <!-- Premios -->
    <mat-form-field appearance="outline" class="half-width" floatLabel="always">
      <mat-label>Premios</mat-label>
      <input matInput formControlName="prizes" />
    </mat-form-field>

    <!-- Reglas -->
    <mat-form-field appearance="outline" class="full-width" floatLabel="always">
      <mat-label>Reglamento</mat-label>
      <textarea matInput formControlName="rules" cdkTextareaAutosize></textarea>
    </mat-form-field>

    <!-- Logo -->
    <div class="logo-upload">
      <ng-container *ngIf="logoPreview; else placeholder">
        <img [src]="logoPreview" alt="Logo preview" style="max-width:150px; max-height:150px;" />
      </ng-container>
      <ng-template #placeholder>
        <img src="../../assets/images/placeholder.png" alt="Placeholder" style="max-width:150px; max-height:150px;" />
      </ng-template>
      <input type="file" (change)="onFileSelected($event)" hidden #fileInput>
      <button mat-stroked-button type="button" (click)="fileInput.click()">
        <mat-icon>upload</mat-icon> Subir Logo
      </button>
    </div>

    <!-- Botones -->
    <div class="actions" style="margin-top:1rem;">
      <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
        Guardar
      </button>
      <button mat-button type="button" (click)="onCancel()">Cancelar</button>
    </div>
  </form>
</div>
