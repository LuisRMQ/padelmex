<mat-card [formGroup]="userForm" class="modal-card">
  <mat-card-header>
    <mat-card-title class="titulo-modal">
      <mat-icon>person_add</mat-icon>
      Registrar Usuario
    </mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <div class="form-grid">
      <!-- Nombre -->
      <mat-form-field appearance="outline">
        <mat-label>Nombre</mat-label>
        <input matInput formControlName="name" placeholder="Ej: Juan">
      </mat-form-field>

      <!-- Apellidos -->
      <mat-form-field appearance="outline">
        <mat-label>Apellidos</mat-label>
        <input matInput formControlName="lastname" placeholder="Ej: Pérez López">
      </mat-form-field>

      <!-- Email -->
      <mat-form-field appearance="outline">
        <mat-label>Correo</mat-label>
        <input matInput type="email" formControlName="email" placeholder="correo@ejemplo.com">
      </mat-form-field>

      <!-- Código de Área -->
      <mat-form-field appearance="outline">
        <mat-label>Código de Área</mat-label>
        <input matInput formControlName="area_code" placeholder="+52">
      </mat-form-field>

      <!-- Teléfono -->
      <mat-form-field appearance="outline">
        <mat-label>Teléfono</mat-label>
        <input matInput formControlName="phone" placeholder="8712119023">
      </mat-form-field>

      <!-- Password -->
      <mat-form-field appearance="outline">
        <mat-label>Contraseña</mat-label>
        <input matInput type="password" formControlName="password" placeholder="********">
      </mat-form-field>

      <!-- Género -->
      <mat-form-field appearance="outline">
        <mat-label>Género</mat-label>
        <mat-select formControlName="gender">
          <mat-option value="masculino">Masculino</mat-option>
          <mat-option value="femenino">Femenino</mat-option>
          <mat-option value="otro">Otro</mat-option>
        </mat-select>
      </mat-form-field>

      <!-- Club -->
      <mat-form-field appearance="outline" class="flex-1">
        <mat-select placeholder="Club" formControlName="club_id">
          <mat-option *ngFor="let club of clubs" [value]="club.id">
            {{ club.name }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="userForm.get('club_id')?.hasError('required')">
          Club es requerido
        </mat-error>
      </mat-form-field>

      <!-- Categoría -->
      <mat-form-field appearance="outline">
        <mat-label>Categoría</mat-label>
        <mat-select formControlName="category_id">
          <mat-option value="1">Primera Varonil</mat-option>
          <mat-option value="2">Segunda Varonil</mat-option>
          <mat-option value="3">Tercera Varonil</mat-option>
          <mat-option value="4">Cuarta Varonil</mat-option>
          <mat-option value="5">Quinta Varonil</mat-option>
          <mat-option value="6">Sexta Varonil</mat-option>
          <mat-option value="7">Septima Varonil</mat-option>
          <mat-option value="8">Primera Femenil</mat-option>
          <mat-option value="9">Segunda Femenil</mat-option>
          <mat-option value="10">Tercera Femenil</mat-option>
          <mat-option value="11">Cuarta Femenil</mat-option>
          <mat-option value="12">Quinta Femenil</mat-option>
          <mat-option value="13">Sexta Femenil</mat-option>
          <mat-option value="14">Septima Femenil</mat-option>
        </mat-select>
      </mat-form-field>

      <!-- Rol -->
      <mat-form-field appearance="outline">
        <mat-label>Rol</mat-label>
        <mat-select formControlName="rol_id">
          <mat-option value="1">Administrador</mat-option>
          <mat-option value="2">Socio</mat-option>
          <mat-option value="3">Finanzas</mat-option>
          <mat-option value="4">Gerente</mat-option>
          <mat-option value="5">Coach</mat-option>
          <mat-option value="6">Contador</mat-option>
          <mat-option value="7">Caja</mat-option>
          <mat-option value="8">Jugador</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Imagen de perfil -->
    <div class="imagenes-section">
      <div class="upload-card">
        <button mat-raised-button color="primary" (click)="fileInput.click()">
          <mat-icon>cloud_upload</mat-icon> Agregar Foto
        </button>
        <input type="file" hidden (change)="onFileSelected($event)" #fileInput>
      </div>
      <mat-card class="preview-card">
        @if (logoPreview) {
        <img [src]="logoPreview" alt="Vista previa" class="logo-preview">
        } <ng-template #noFoto>
          <div class="no-image">Sin foto</div>
        </ng-template>
      </mat-card>
    </div>
  </mat-card-content>

  <mat-card-actions align="end">
    <button mat-raised-button color="primary" (click)="guardarUsuario()">
      <mat-icon>save</mat-icon> Guardar
    </button>
    <button mat-button color="warn" type="reset" (click)="onCancel()">
      <mat-icon>close</mat-icon> Cancelar
    </button>
  </mat-card-actions>
</mat-card>
