<div class="header">
  <h1>Configuraci贸n</h1>
</div>

<div class="container">
  <!-- Loading -->
  <ng-container *ngIf="loading">
    <div class="loading-overlay">
      <mat-spinner diameter="50"></mat-spinner>
      <p>Cargando datos...</p>
    </div>
  </ng-container>

  <!-- Categor铆as -->
  <mat-card class="config-section">
    <mat-card-header>
      <mat-card-title> Configuraci贸n de Categor铆as</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="input-group">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nueva categor铆a</mat-label>
          <input matInput [(ngModel)]="newCategory">
          <button mat-icon-button matSuffix color="primary" (click)="addCategory()">
            <mat-icon>add</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <div *ngIf="categories.length > 0" class="categories-list">
        <div *ngFor="let cat of categories" class="category-item-card">
          <div class="category-item-content">
            <div class="category-text">
              <!-- Modo visual -->
              <div *ngIf="!cat.editing" class="category-name">{{ cat.category }}</div>
              <!-- Modo edici贸n -->
              <mat-form-field *ngIf="cat.editing" appearance="outline" class="full-width">
                <input matInput [(ngModel)]="cat.category">
              </mat-form-field>
            </div>
          </div>

          <div class="card-buttons">
            <button mat-icon-button color="accent" (click)="toggleEditCategory(cat)">
              <mat-icon>{{ cat.editing ? 'check' : 'edit' }}</mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="removeCategory(cat)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="categories.length === 0 && !loading" class="empty-state">
        <mat-icon>inbox</mat-icon>
        <p>No hay categor铆as registradas</p>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Roles -->
  <mat-card class="config-section">
    <mat-card-header>
      <mat-card-title> Configuraci贸n de Roles</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="input-group">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nuevo rol</mat-label>
          <input matInput [(ngModel)]="newRole">
          <button mat-icon-button matSuffix color="primary" (click)="addRole()">
            <mat-icon>add</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <div *ngIf="roles.length > 0" class="roles-list">
        <div *ngFor="let role of roles" class="role-item-card">
          <div class="role-item-content">
            <div class="role-text">
              <!-- Modo visual -->
              <div *ngIf="!role.editing" class="role-name">{{ role.rol }}</div>
              <!-- Modo edici贸n -->
              <mat-form-field *ngIf="role.editing" appearance="outline" class="full-width">
                <input matInput [(ngModel)]="role.rol">
              </mat-form-field>
            </div>
          </div>

          <div class="card-buttons">
            <button mat-icon-button color="accent" (click)="toggleEditRole(role)">
              <mat-icon>{{ role.editing ? 'check' : 'edit' }}</mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="removeRole(role)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="roles.length === 0 && !loading" class="empty-state">
        <mat-icon>group</mat-icon>
        <p>No hay roles registrados</p>
      </div>
    </mat-card-content>
  </mat-card>
</div>
