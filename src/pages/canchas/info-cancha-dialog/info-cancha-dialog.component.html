<h2 mat-dialog-title class="titulo-dialogo">
  ðŸ•“ Horarios de {{ data.court.name }}
</h2>

<mat-dialog-content class="tabla-horarios">
  <table mat-table [dataSource]="data.horarios" class="mat-elevation-z4 tabla-estilo">
    <!-- DÃ­a -->
    <ng-container matColumnDef="day">
      <th mat-header-cell *matHeaderCellDef>DÃ­a</th>
      <td mat-cell *matCellDef="let horario; let i = index">
        <ng-container *ngIf="editIndex === i; else viewDay">
          <mat-form-field appearance="outline" class="campo-tabla">
            <mat-select [(ngModel)]="editHorario.day">
              <mat-option *ngFor="let dia of diasSemana" [value]="dia.value">
                {{ dia.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
        <ng-template #viewDay>
          {{ horario.day }}
        </ng-template>
      </td>
    </ng-container>

    <!-- Hora Inicio -->
    <ng-container matColumnDef="start_time">
      <th mat-header-cell *matHeaderCellDef>Inicio</th>
      <td mat-cell *matCellDef="let horario; let i = index">
        <ng-container *ngIf="editIndex === i; else viewStart">
          <mat-form-field appearance="outline" class="campo-tabla">
            <input matInput type="time" [(ngModel)]="editHorario.start_time">
          </mat-form-field>
        </ng-container>
        <ng-template #viewStart>
          {{ horario.start_time }}
        </ng-template>
      </td>
    </ng-container>

    <!-- Hora Fin -->
    <ng-container matColumnDef="end_time">
      <th mat-header-cell *matHeaderCellDef>Fin</th>
      <td mat-cell *matCellDef="let horario; let i = index">
        <ng-container *ngIf="editIndex === i; else viewEnd">
          <mat-form-field appearance="outline" class="campo-tabla">
            <input matInput type="time" [(ngModel)]="editHorario.end_time">
          </mat-form-field>
        </ng-container>
        <ng-template #viewEnd>
          {{ horario.end_time }}
        </ng-template>
      </td>
    </ng-container>

    <!-- Precio -->
    <ng-container matColumnDef="price_hour">
      <th mat-header-cell *matHeaderCellDef>Precio/Hora</th>
      <td mat-cell *matCellDef="let horario; let i = index">
        <ng-container *ngIf="editIndex === i; else viewPrice">
          <mat-form-field appearance="outline" class="campo-tabla">
            <input matInput type="number" [(ngModel)]="editHorario.price_hour">
          </mat-form-field>
        </ng-container>
        <ng-template #viewPrice>
          ${{ horario.price_hour }}
        </ng-template>
      </td>
    </ng-container>

    <!-- Turno -->
    <ng-container matColumnDef="shift_name">
      <th mat-header-cell *matHeaderCellDef>Turno</th>
      <td mat-cell *matCellDef="let horario; let i = index">
        <ng-container *ngIf="editIndex === i; else viewShift">
          <mat-form-field appearance="outline" class="campo-tabla">
            <mat-select [(ngModel)]="editHorario.shift_name">
              <mat-option value="morning">MaÃ±ana</mat-option>
              <mat-option value="afternoon">Tarde</mat-option>
              <mat-option value="night">Noche</mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
        <ng-template #viewShift>
          {{ getShiftLabel(horario.shift_name) }}
        </ng-template>
      </td>
    </ng-container>

    <!-- Acciones -->
    <ng-container matColumnDef="acciones">
      <th mat-header-cell *matHeaderCellDef>Acciones</th>
      <td mat-cell *matCellDef="let horario; let i = index" class="acciones-celda">
        <ng-container *ngIf="editIndex === i; else viewActions">
          <button mat-icon-button color="primary" (click)="guardarEdicion()">
            <mat-icon>check</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="cancelarEdicion()">
            <mat-icon>close</mat-icon>
          </button>
        </ng-container>
        <ng-template #viewActions>
          
          <button mat-icon-button color="warn" (click)="eliminarHorario(horario)">
            <mat-icon>delete</mat-icon>
          </button>
        </ng-template>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns" class="fila-tabla"></tr>
  </table>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-stroked-button color="accent" (click)="cerrar()">Cerrar</button>
</mat-dialog-actions>
